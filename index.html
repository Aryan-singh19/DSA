<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Simple File Share</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f7f7f7;
    }
    h1 { color: #333; }
    #fileList {
      margin-top: 20px;
    }
    .file-item {
      background: #fff;
      padding: 10px;
      margin: 5px 0;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    a {
      color: #007BFF;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1>ðŸ“‚ Simple File Share</h1>
  <input type="file" id="fileInput" />
  <button onclick="uploadFile()">Upload</button>

  <div id="fileList">
    <h2>Uploaded Files</h2>
    <div id="files"></div>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-storage.js"></script>

  <script>
    // Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyCJg9XOe-t9w4cF9KnIaTv4xQr_R7ltzR4",
      authDomain: "awesome-2ba72.firebaseapp.com",
      projectId: "awesome-2ba72",
      storageBucket: "awesome-2ba72.appspot.com",
      messagingSenderId: "344507591916",
      appId: "1:344507591916:web:96bd213228d22e351389c9"
    };

    // Init
    firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();

    // Upload file
    function uploadFile() {
      const file = document.getElementById("fileInput").files[0];
      if (!file) {
        alert("Please select a file first!");
        return;
      }

      const storageRef = storage.ref("uploads/" + file.name);
      const uploadTask = storageRef.put(file);

      uploadTask.on("state_changed",
        (snapshot) => {
          let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
          console.log("Upload is " + progress + "% done");
        },
        (error) => {
          console.error("Upload failed:", error);
          alert("Error uploading file!");
        },
        () => {
          uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {
            addFileToList(file.name, downloadURL);
          });
        }
      );
    }

    // Show uploaded file in list
    function addFileToList(name, url) {
      const filesDiv = document.getElementById("files");
      const item = document.createElement("div");
      item.className = "file-item";
      item.innerHTML = `<strong>${name}</strong> â€” <a href="${url}" target="_blank">Download</a>`;
      filesDiv.appendChild(item);
    }

    // Load existing files when page opens
    function loadFiles() {
      const listRef = storage.ref("uploads/");
      listRef.listAll().then((res) => {
        res.items.forEach((itemRef) => {
          itemRef.getDownloadURL().then((url) => {
            addFileToList(itemRef.name, url);
          });
        });
      }).catch((error) => {
        console.error("Error listing files:", error);
      });
    }

    loadFiles();
  </script>
</body>
  </html>
  
